<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>UnityShader学习【一】 - 放一些摸鱼记录</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="放一些摸鱼记录"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="放一些摸鱼记录"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="一个Shader的学习记录"><meta property="og:type" content="blog"><meta property="og:title" content="UnityShader学习【一】"><meta property="og:url" content="https://seto098.github.io/2021/10/02/TA%E5%85%A5%E9%97%A8-2021-10-02-UnityShader%E5%AD%A6%E4%B9%A0%E3%80%90%E4%B8%80%E3%80%91/"><meta property="og:site_name" content="放一些摸鱼记录"><meta property="og:description" content="一个Shader的学习记录"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="c:/Users/Seto/AppData/Roaming/Typora/typora-user-images/image-20210925143732550.png"><meta property="og:image" content="https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210925143816388.png"><meta property="og:image" content="https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210925204502111.png"><meta property="og:image" content="https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210925232615420.png"><meta property="og:image" content="https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210927205530216.png"><meta property="og:image" content="https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210928221609460.png"><meta property="og:image" content="https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210928232634446.png"><meta property="og:image" content="https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210928225046717.png"><meta property="og:image" content="https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210928225542735.png"><meta property="og:image" content="https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210928233552940.png"><meta property="og:image" content="https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210928234136364.png"><meta property="og:image" content="https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210928234548629.png"><meta property="article:published_time" content="2021-10-02T13:42:23.000Z"><meta property="article:modified_time" content="2021-10-02T13:53:06.146Z"><meta property="article:author" content="Seto"><meta property="article:tag" content="Shader"><meta property="article:tag" content="TA"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="C:\Users\Seto\AppData\Roaming\Typora\typora-user-images\image-20210925143732550.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://seto098.github.io/2021/10/02/TA%E5%85%A5%E9%97%A8-2021-10-02-UnityShader%E5%AD%A6%E4%B9%A0%E3%80%90%E4%B8%80%E3%80%91/"},"headline":"放一些摸鱼记录","image":["c:/Users/Seto/AppData/Roaming/Typora/typora-user-images/image-20210925143732550.png","https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210925143816388.png","https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210925204502111.png","https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210925232615420.png","https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210927205530216.png","https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210928221609460.png","https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210928232634446.png","https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210928225046717.png","https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210928225542735.png","https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210928233552940.png","https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210928234136364.png","https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210928234548629.png"],"datePublished":"2021-10-02T13:42:23.000Z","dateModified":"2021-10-02T13:53:06.146Z","author":{"@type":"Person","name":"Seto"},"description":"一个Shader的学习记录"}</script><link rel="canonical" href="https://seto098.github.io/2021/10/02/TA%E5%85%A5%E9%97%A8-2021-10-02-UnityShader%E5%AD%A6%E4%B9%A0%E3%80%90%E4%B8%80%E3%80%91/"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/pace/1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo2.svg" alt="放一些摸鱼记录" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">文章</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="My GitHub" href="https://github.com/Seto098"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-10-02T13:42:23.000Z" title="2021/10/2 下午9:42:23">2021-10-02</time>发表</span><span class="level-item"><time dateTime="2021-10-02T13:53:06.146Z" title="2021/10/2 下午9:53:06">2021-10-02</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Unity/">Unity</a></span><span class="level-item">19 分钟读完 (才写了2777个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">UnityShader学习【一】</h1><div class="content"><blockquote>
<p>一个Shader的学习记录</p>
</blockquote>
<p>[TOC]</p>
<p>UnityShader属性类型</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自带颜色参数</span></span><br><span class="line">_Color(<span class="string">&quot;Color&quot;</span>,Color)=(<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line"><span class="comment">//四维向量xyzw,rgba</span></span><br><span class="line">_Vector(<span class="string">&quot;Vector&quot;</span>,Vector)=(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="comment">//整数</span></span><br><span class="line">_Int(<span class="string">&quot;Int&quot;</span>,Int)=<span class="number">1</span></span><br><span class="line"><span class="comment">//浮点数</span></span><br><span class="line">_Float(<span class="string">&quot;Float&quot;</span>,<span class="built_in">float</span>)=<span class="number">23.1</span></span><br><span class="line"><span class="comment">//范围</span></span><br><span class="line">_Range(<span class="string">&quot;Range&quot;</span>,Range(<span class="number">1</span>,<span class="number">0</span>))=<span class="number">0.5</span></span><br><span class="line"><span class="comment">//2D 3D纹理，不指定图片默认为white</span></span><br><span class="line">_2D(<span class="string">&quot;2DTexture&quot;</span>,<span class="number">2</span>D)=<span class="string">&quot;white&quot;</span>&#123;&#125;</span><br><span class="line">_3D(<span class="string">&quot;3DTexture&quot;</span>,<span class="number">3</span>D)=<span class="string">&quot;white&quot;</span>&#123;&#125;</span><br><span class="line"><span class="comment">//立方体纹理,不指定图片默认为white</span></span><br><span class="line">_Cube(<span class="string">&quot;Cube&quot;</span>,Cube)=<span class="string">&quot;white&quot;</span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>uniyuCG.cginc中常用函数</p>
<ul>
<li>视角方向</li>
</ul>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//模型空间中的顶点坐标-&gt;世界空间从这个点到摄像机的观察方向</span></span><br><span class="line"><span class="function">float3 <span class="title">WorldSpaceViewDir</span>(<span class="params">float4 v</span>)</span></span><br><span class="line"><span class="function"><span class="comment">//世界空间中的顶点坐标-&gt;世界空间从这个点到摄像机的观察方向</span></span></span><br><span class="line"><span class="function">float3 <span class="title">UnityWorldSpaceViewDir</span>(<span class="params">float4 v</span>)</span></span><br><span class="line"><span class="function"><span class="comment">//模型空间中的顶点坐标-&gt;模型空间从这个点到摄像机的观察方向</span></span></span><br><span class="line"><span class="function">float3 <span class="title">ObjSpaceViewDir</span>(<span class="params">float4 v</span>)</span></span><br></pre></td></tr></table></figure>
<ul>
<li>光源方向</li>
</ul>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//模型空间中的顶点坐标-&gt;世界空间中从这个点到光源的方向</span></span><br><span class="line"><span class="function">float3 <span class="title">WorldSpaceLightDir</span>(<span class="params">float4 v</span>)</span></span><br><span class="line"><span class="function"><span class="comment">//世界空间中的顶点坐标-&gt;世界空间中从这个点到光源的方向</span></span></span><br><span class="line"><span class="function">float3 <span class="title">UnityWorldSpaceLightDir</span>(<span class="params">float4 v</span>)</span></span><br><span class="line"><span class="function"><span class="comment">//模型空间中的顶点坐标-&gt;模型空间中从这个点到光源的方向</span></span></span><br><span class="line"><span class="function">float3 <span class="title">ObjSpaceLightDir</span>(<span class="params">float4 v</span>)</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th align="right"></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td align="right">_WorldSpqceLightPos0</td>
<td>世界坐标中光源的位置或方向向量<br />如_WorldSpqceLightPos0.w<br />w为0为平行光，w为1则为点光源或聚光灯</td>
</tr>
</tbody></table>
<ul>
<li>方向转换</li>
</ul>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//法线方向从模型空间-&gt;世界空间</span></span><br><span class="line"><span class="function">float3 <span class="title">UnityObjectToWorldNormal</span>(<span class="params">float3 norm</span>)</span></span><br><span class="line"><span class="function"><span class="comment">//把方向    模型空间-&gt;世界空间</span></span></span><br><span class="line"><span class="function">float3 <span class="title">UnityObjectToWorldDir</span>(<span class="params">float3 dir</span>)</span></span><br><span class="line"><span class="function"><span class="comment">//把方向    世界空间-&gt;模型空间</span></span></span><br><span class="line"><span class="function">float3 <span class="title">UnityWorldToObjectDir</span>(<span class="params">float3 dir</span>)</span></span><br></pre></td></tr></table></figure>


<p>从应用程序传递到顶点函数的语义<strong>a2v</strong>（application to vertex）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">POSITION------顶点坐标</span><br><span class="line">NORMAL--------法线</span><br><span class="line">TANGENT-------切线</span><br><span class="line">TEXCOORD0~n---纹理坐标</span><br><span class="line">COLOR---------顶点颜色</span><br></pre></td></tr></table></figure>
<p>从顶点函数传递给片元函数的语义</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SV_POSITION---剪裁空间中的顶点坐标</span><br><span class="line">COLOR0--------可以传递一组4个值</span><br><span class="line">COLOR1--------可以传递一组4个值</span><br><span class="line">TEXCOORD0~7---传递纹理坐标</span><br></pre></td></tr></table></figure>
<p>片元函数传递给系统</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SV_TARGET-----颜色值，显示到屏幕上的颜色</span><br></pre></td></tr></table></figure>
<p>ShaderLab属性类型和CG变量类型的匹配关系</p>
<table>
<thead>
<tr>
<th align="right">ShaderLab属性类型</th>
<th align="left">CG变量类型</th>
</tr>
</thead>
<tbody><tr>
<td align="right">Color,  Vector</td>
<td align="left">float4  half4  fixed4</td>
</tr>
<tr>
<td align="right">Range,  Float</td>
<td align="left">float,  half,  fixed</td>
</tr>
<tr>
<td align="right">2D</td>
<td align="left">sampler2D</td>
</tr>
<tr>
<td align="right">Cube</td>
<td align="left">samplerCube</td>
</tr>
<tr>
<td align="right">3D</td>
<td align="left">sampler3D</td>
</tr>
</tbody></table>
<p>从应用阶段传递模型数据给顶点着色器时unity支持的常用语义</p>
<table>
<thead>
<tr>
<th align="right">语义</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="right">POSITION</td>
<td align="left">模型空间中的顶点位置，通常为float4类型</td>
</tr>
<tr>
<td align="right">NORMAL</td>
<td align="left">顶点法线，通常是float3类型</td>
</tr>
<tr>
<td align="right">TANGENT</td>
<td align="left">顶点切线，通常是float4类型</td>
</tr>
<tr>
<td align="right">TEXCOORD0<br />TEXCOORD1</td>
<td align="left">该顶点的纹理坐标，通常是float2或float4类型</td>
</tr>
<tr>
<td align="right">COLOR</td>
<td align="left">顶点颜色，通常是fixed4或float4类型</td>
</tr>
</tbody></table>
<p>常用数学函数</p>
<table>
<thead>
<tr>
<th align="right">函数</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td align="right">dot( A , B )</td>
<td>返回 A 和 B 的点积(dot product)。参数 A 和 B 可以是标量，也可以是向量</td>
</tr>
<tr>
<td align="right">pow( A , B )</td>
<td>返回 A 的 B 次方</td>
</tr>
<tr>
<td align="right"></td>
<td></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="right">函数</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td align="right">saturate(x)</td>
<td>如果 x 小于 0，返回 0；如果 x 大于 1，返回1；否则，返回 x</td>
</tr>
<tr>
<td align="right">mul(M, N)</td>
<td>计算两个矩阵相乘，如果 M 为 AxB 阶矩阵，N 为 BxC阶矩阵，则返回 AxC 阶矩阵。</td>
</tr>
</tbody></table>
<p>几何函数（Geometric Functions）</p>
<table>
<thead>
<tr>
<th align="right">函数</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="right">normalize( v)</td>
<td align="left">对向量进行归一化</td>
</tr>
</tbody></table>
<h6 id="第一个顶点-片元着色器"><a href="#第一个顶点-片元着色器" class="headerlink" title="第一个顶点/片元着色器"></a>第一个顶点/片元着色器</h6><p><img src="C:\Users\Seto\AppData\Roaming\Typora\typora-user-images\image-20210925143732550.png" alt="SimpleShader01"></p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义这个Unity Shader的名字</span></span><br><span class="line">Shader <span class="string">&quot;Custom/Learn_SimpleShader01&quot;</span></span><br><span class="line">&#123;</span><br><span class="line">  SubShader&#123;</span><br><span class="line">    Pass&#123;</span><br><span class="line">      CGPROGRAM</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//#pragma vertex name</span></span><br><span class="line">      <span class="comment">//#pragma fragment name</span></span><br><span class="line">      <span class="comment">//声明了一个顶点函数vert和片元函数frag</span></span><br><span class="line">      <span class="meta">#<span class="meta-keyword">pragma</span> vertex vert</span></span><br><span class="line">      <span class="meta">#<span class="meta-keyword">pragma</span> fragment frag</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//POSITION把顶点坐标返回给v</span></span><br><span class="line">      <span class="comment">//SV_POSITION把值v作为裁剪空间中的顶点坐标</span></span><br><span class="line">      <span class="function">float4 <span class="title">vert</span>(<span class="params">float4 v : POSITION</span>):SV_POSITION</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> UnityObjectToClipPos(v);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//SV_TARGET返回黄色</span></span><br><span class="line">      <span class="function">float4 <span class="title">frag</span>(<span class="params"></span>):SV_TARGET</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> float4(<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      ENDCG</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  Fallback <span class="string">&quot;VertexLit&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h6 id="一个带结构体的着色器"><a href="#一个带结构体的着色器" class="headerlink" title="一个带结构体的着色器"></a>一个带结构体的着色器</h6><p>从顶点着色器输出一些数据（法线、纹理坐标等）传递给片元着色器，涉及到顶点着色器和片元着色器之间的通信。</p>
<p><img src="https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210925143816388.png" alt="SimpleShader02"></p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">Shader <span class="string">&quot;Custom/Learn_SimpleShader02&quot;</span></span><br><span class="line">&#123;</span><br><span class="line">  SubShader</span><br><span class="line">  &#123;</span><br><span class="line">    pass&#123;</span><br><span class="line">      CGPROGRAM</span><br><span class="line">      <span class="meta">#<span class="meta-keyword">pragma</span> vertex vert</span></span><br><span class="line">      <span class="meta">#<span class="meta-keyword">pragma</span> fragment frag</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//application to vertex</span></span><br><span class="line">      <span class="comment">//应用程序传递到顶点函数</span></span><br><span class="line">      <span class="comment">//使用一个结构体a2v来定义顶点着色器的输入</span></span><br><span class="line">      <span class="keyword">struct</span> a2v&#123;</span><br><span class="line">        <span class="comment">//用模型空间的顶点坐标填充vertex变量</span></span><br><span class="line">        float4 vertex : POSITION;</span><br><span class="line">        <span class="comment">//用模型空间的法线坐标填充normal变量</span></span><br><span class="line">        float3 normal : NORMAL;</span><br><span class="line">        <span class="comment">//用模型的第一套纹理坐标填充texcoord变量</span></span><br><span class="line">        float4 texcoord : TEXCOORD0;</span><br><span class="line">      &#125;;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//vertex to fragment</span></span><br><span class="line">      <span class="comment">//顶点函数传递到片元函数</span></span><br><span class="line">      <span class="comment">//使用一个结构体v2f来定义顶点着色器的输出</span></span><br><span class="line">      <span class="keyword">struct</span> v2f&#123;</span><br><span class="line">        <span class="comment">//pos里包含了顶点在裁剪空间中的位置信息</span></span><br><span class="line">        float4 pos : SV_POSITION;</span><br><span class="line">        <span class="comment">//COLOR0于一可以存储颜色信息</span></span><br><span class="line">        float3 color : COLOR0;</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="function">v2f <span class="title">vert</span>(<span class="params">a2v v</span>)</span>&#123;</span><br><span class="line">        <span class="comment">//声明输出结构</span></span><br><span class="line">        v2f o;</span><br><span class="line">        o.pos=UnityObjectToClipPos(v.vertex);</span><br><span class="line">        <span class="comment">//v.normal包含了顶点的法线方向，范围在[-1.0,1.0]</span></span><br><span class="line">        <span class="comment">//映射到[0.0,1.0]存储在o.color中传递给片元着色器</span></span><br><span class="line">        o.color=v.normal * <span class="number">0.5</span> + float3(<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>);</span><br><span class="line">        <span class="keyword">return</span> o;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function">float4 <span class="title">frag</span>(<span class="params">v2f i</span>):SV_TARGET</span>&#123;</span><br><span class="line">        <span class="comment">//将i.color值显示到屏幕</span></span><br><span class="line">        <span class="keyword">return</span> float4(i.color,<span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      ENDCG</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  Fallback <span class="string">&quot;VertexLit&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="一个带可控属性的简单着色器"><a href="#一个带可控属性的简单着色器" class="headerlink" title="一个带可控属性的简单着色器"></a>一个带可控属性的简单着色器</h6><p><img src="https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210925204502111.png"></p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">Shader <span class="string">&quot;Learn_SimpleShader03&quot;</span></span><br><span class="line">&#123;</span><br><span class="line">  Properties&#123;</span><br><span class="line">    <span class="comment">//声明一个Color类型的属性</span></span><br><span class="line">    _Color(<span class="string">&quot;Diffuse Color&quot;</span>,Color)=(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1.0</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  SubShader&#123;</span><br><span class="line">    pass&#123;</span><br><span class="line">      CGPROGRAM</span><br><span class="line">      <span class="meta">#<span class="meta-keyword">pragma</span> vertex vert</span></span><br><span class="line">      <span class="meta">#<span class="meta-keyword">pragma</span> fragment frag</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment">//定义一个与属性名称和类型匹配的变量</span></span><br><span class="line">      float4 _Color;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">struct</span> a2v&#123;</span><br><span class="line">        float4 vertex : POSITION;</span><br><span class="line">        float4 normal : NORMAL;</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">struct</span> v2f&#123;</span><br><span class="line">        float4 pos : SV_POSITION;</span><br><span class="line">        float3 color : COLOR0;</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="function">v2f <span class="title">vert</span>(<span class="params">a2v v</span>)</span>&#123;</span><br><span class="line">        v2f o;</span><br><span class="line">        o.pos=UnityObjectToClipPos(v.vertex);</span><br><span class="line">        o.color=float3(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> o;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function">float4 <span class="title">frag</span>(<span class="params">v2f i</span>) : SV_TARGET</span>&#123;</span><br><span class="line">        float3 c = i.color;</span><br><span class="line">        c *= _Color.rgb;</span><br><span class="line">        <span class="keyword">return</span> float4(c,<span class="number">1.0</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      ENDCG</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  Fallback <span class="string">&quot;VertexLit&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="漫反射（diffuse"><a href="#漫反射（diffuse" class="headerlink" title="漫反射（diffuse)"></a>漫反射（diffuse)</h1><p><img src="https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210925232615420.png" alt="漫反射计算公式"></p>
<p>C<del>light</del> ———入射光线的颜色和强度<br>M<del>diffuse</del> ——材质的漫反射系数<br>n ————–表面法线<br>I —————光源方向</p>
<h2 id="逐顶点漫反射光照"><a href="#逐顶点漫反射光照" class="headerlink" title="逐顶点漫反射光照"></a>逐顶点漫反射光照</h2><p><img src="https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210927205530216.png"></p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">Shader <span class="string">&quot;Custom/Learn02_DiffuseVertex&quot;</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  properties&#123;</span><br><span class="line">    _DiffuseColor(<span class="string">&quot;Diffuse Color&quot;</span>,Color)=(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  SubShader&#123;</span><br><span class="line">    Pass&#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//定义了LightMode才能得到一些Unity的内置光照变量 </span></span><br><span class="line">      Tags&#123;<span class="string">&quot;LightMode&quot;</span>=<span class="string">&quot;ForwardBase&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">      CGPROGRAM</span><br><span class="line">      <span class="meta">#<span class="meta-keyword">pragma</span> vertex vert</span></span><br><span class="line">      <span class="meta">#<span class="meta-keyword">pragma</span> fragment frag</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//引用Unity内置文件</span></span><br><span class="line">      <span class="meta">#include &quot;Lighting.cginc&quot;</span></span><br><span class="line"></span><br><span class="line">      fixed3 _DiffuseColor;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">struct</span> a2v&#123;</span><br><span class="line">        <span class="comment">//获取模型空间下的顶点坐标</span></span><br><span class="line">        float4 vertex : POSITION;</span><br><span class="line">        <span class="comment">//获取模型空间下的顶点法线</span></span><br><span class="line">        float3 normal : NORMAL;</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">struct</span> v2f&#123;</span><br><span class="line">        float4 pos : SV_POSITION;</span><br><span class="line">        fixed3 diffuseColor : COlOR0;</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="function">v2f <span class="title">vert</span>(<span class="params">a2v v</span>)</span>&#123;</span><br><span class="line">        v2f o;</span><br><span class="line">        <span class="comment">//把顶点位置从模型空间转换到裁剪空间中</span></span><br><span class="line">        o.pos = UnityObjectToClipPos(v.vertex);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取平行光的颜色</span></span><br><span class="line">        fixed3 ambient = _LightColor0.rgb;</span><br><span class="line">        <span class="comment">//取得世界空间下的光方向</span></span><br><span class="line">        fixed3 worldLight = normalize(_WorldSpaceLightPos0.xyz);</span><br><span class="line">        <span class="comment">//将在模型空间取得的模型法线转换到世界空间</span></span><br><span class="line">        fixed3 normalDir = normalize(mul((float3x3)unity_ObjectToWorld,v.normal));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 根据公式输出结果</span></span><br><span class="line">        o.diffuseColor = (ambient * _DiffuseColor.xyz) * saturate(dot(normalDir,worldLight));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> o;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function">fixed4 <span class="title">frag</span>(<span class="params">v2f i</span>) : SV_TARGET</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> float4(i.diffuseColor,<span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      ENDCG</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  Fallback <span class="string">&quot;Diffuse&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于一些细分程度低的模型，逐顶点光照会出现视觉问题，如悲观面和向光面交界处有锯齿。</p>
<h2 id="逐像素漫反射光照"><a href="#逐像素漫反射光照" class="headerlink" title="逐像素漫反射光照"></a>逐像素漫反射光照</h2><p><img src="https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210928221609460.png" alt="逐顶点和逐像素对比"></p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">Shader <span class="string">&quot;Custom/Learn02_DiffusePixel&quot;</span></span><br><span class="line">&#123; </span><br><span class="line">  properties&#123;</span><br><span class="line">    _DiffuseColor(<span class="string">&quot;Diffuse Color&quot;</span>,Color) = (<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  SubShader&#123;</span><br><span class="line">    Pass&#123;</span><br><span class="line">      Tags&#123;<span class="string">&quot;LightMode&quot;</span>=<span class="string">&quot;ForwardBase&quot;</span>&#125;</span><br><span class="line">      CGPROGRAM</span><br><span class="line"></span><br><span class="line">      <span class="meta">#<span class="meta-keyword">pragma</span> vertex vert</span></span><br><span class="line">      <span class="meta">#<span class="meta-keyword">pragma</span> fragment frag</span></span><br><span class="line">      <span class="meta">#include &quot;Lighting.cginc&quot;</span></span><br><span class="line"></span><br><span class="line">      fixed3 _DiffuseColor;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">struct</span> a2v&#123;</span><br><span class="line">        float4 vertex : POSITION;</span><br><span class="line">        fixed3 normal : NORMAL;</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">struct</span> v2f&#123;</span><br><span class="line">        float4 pos : SV_POSITION;</span><br><span class="line">        fixed3 normalDir : COLOR0;</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="function">v2f <span class="title">vert</span>(<span class="params">a2v v</span>)</span>&#123;</span><br><span class="line">        v2f o;</span><br><span class="line">        o.pos = UnityObjectToClipPos(v.vertex);</span><br><span class="line">        o.normalDir = normalize(mul((float3x3)unity_ObjectToWorld,v.normal));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> o;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function">fixed4 <span class="title">frag</span>(<span class="params">v2f i</span>) : SV_TARGET</span>&#123;</span><br><span class="line"></span><br><span class="line">        fixed3 ambient = _LightColor0.rgb;</span><br><span class="line">        fixed3 worldLightPos = normalize(_WorldSpaceLightPos0.xyz);</span><br><span class="line">        fixed3 diffuseColor = (ambient * _DiffuseColor) * saturate(dot(worldLightPos,i.normalDir));</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> fixed4(diffuseColor,<span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      ENDCG</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  Fallback <span class="string">&quot;Diffuse&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="兰伯特模型（Half-Lambert）"><a href="#兰伯特模型（Half-Lambert）" class="headerlink" title="兰伯特模型（Half Lambert）"></a>兰伯特模型（Half Lambert）</h2><p><img src="https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210928232634446.png"></p>
<p>以上的漫反射光照模型也被称为兰伯特光照模型，因为它符合兰伯特定律——在平面某点漫反射光的光强与该反射点的法向量和入射光角度的余弦值成正比。</p>
<p>广义的半兰伯特光照模型公式如下：</p>
<p><img src="https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210928225046717.png" alt="HalfLambert"></p>
<p>和原兰伯特模型相比，半兰伯特光照模型没有使用max来操作防止 n , I 的点积为负值。<br>而是对其结果进行了一个α缩放和β大小的偏移。<br>通过这样，可以将dot(n , I)的结果范围从[-1,1]映射到[0,1]。</p>
<p><img src="https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210928225542735.png" alt="半兰伯特计算公式"></p>
<p>C<del>light</del> ———入射光线的颜色和强度<br>M<del>diffuse</del> ——材质的漫反射系数<br>n ————–表面法线<br>I —————光源方向</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fixed3 diffuseColor = (ambient * _DiffuseColor) * (<span class="number">0.5</span> * dot(worldLightPos,i.normalDir) + <span class="number">0.5</span>);</span><br></pre></td></tr></table></figure>


<h1 id="高光反射（Specular）"><a href="#高光反射（Specular）" class="headerlink" title="高光反射（Specular）"></a>高光反射（Specular）</h1><p><img src="https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210928233552940.png" alt="高光反射计算公式"></p>
<p>C<del>light</del> ———入射光线的颜色和强度<br>M<del>specular</del> —-材质的高光反射系数<br>v ————–视角方向<br>r ————–反射方向</p>
<p>反射方向 r 可以由表面法线 n 和光源方向 I 计算所得：</p>
<p><img src="https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210928234136364.png" alt="反射方向计算"></p>
<p>CG也提供了计算反射方向的函数</p>
<table>
<thead>
<tr>
<th align="left">reflect(i , n)</th>
<th align="left">i —–光源入射方向<br />n —-法线方向<br /></th>
<th align="left">当给定入射方向和法线方向时，<br />reflect函数可以返回反射方向</th>
</tr>
</thead>
</table>
<p><img src="https://gitee.com/Tanglk-Seto/photo-gallery/raw/master/img/image-20210928234548629.png" alt="reflect函数"></p>
<h2 id="逐顶点反射"><a href="#逐顶点反射" class="headerlink" title="逐顶点反射"></a>逐顶点反射</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">Shader <span class="string">&quot;Learn02_SpecularVertex&quot;</span></span><br><span class="line">&#123;</span><br><span class="line">  properties&#123;</span><br><span class="line">    _DiffuseColor(<span class="string">&quot;DiffuseColor&quot;</span>,Color) = (<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">    _Specular(<span class="string">&quot;Specular&quot;</span>,Color) = (<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">    _Gloss(<span class="string">&quot;Gloss&quot;</span>,Range(<span class="number">8</span>,<span class="number">256</span>)) = <span class="number">50</span></span><br><span class="line">  &#125;</span><br><span class="line">  SubShader&#123;</span><br><span class="line">    Pass&#123;</span><br><span class="line">      Tags&#123;<span class="string">&quot;LightMode&quot;</span> = <span class="string">&quot;ForwardBase&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">      CGPROGRAM</span><br><span class="line">      <span class="meta">#<span class="meta-keyword">pragma</span> vertex vert</span></span><br><span class="line">      <span class="meta">#<span class="meta-keyword">pragma</span> fragment frag</span></span><br><span class="line">      <span class="meta">#include &quot;Lighting.cginc&quot;</span></span><br><span class="line"></span><br><span class="line">      fixed3 _DiffuseColor;</span><br><span class="line">      fixed3 _Specular;</span><br><span class="line">      <span class="built_in">float</span> _Gloss;</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">struct</span> a2v&#123;</span><br><span class="line">        float4 vertex : POSITION;</span><br><span class="line">        fixed3 normal : NORMAL;</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">struct</span> v2f&#123;</span><br><span class="line">        float4 pos : SV_POSITION;</span><br><span class="line">        float3 color : COLOR0;</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="function">v2f <span class="title">vert</span>(<span class="params">a2v v</span>)</span>&#123;</span><br><span class="line">        v2f o;</span><br><span class="line">        o.pos =UnityObjectToClipPos(v.vertex);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//平行光颜色</span></span><br><span class="line">        fixed3 ambient = _LightColor0.rgb;</span><br><span class="line">        <span class="comment">//光源方向</span></span><br><span class="line">        fixed3 worldLightPos = normalize(_WorldSpaceLightPos0.xyz);</span><br><span class="line">        <span class="comment">//将顶点法线转换到世界空间</span></span><br><span class="line">        fixed3 normalDir = normalize(mul((float3x3)unity_ObjectToWorld,v.normal));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//漫反射</span></span><br><span class="line">        fixed3 diffuseColor = (ambient * _DiffuseColor) * (<span class="number">0.5</span> + <span class="number">0.5</span> * dot(worldLightPos,normalDir));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//计算反射方向</span></span><br><span class="line">        <span class="comment">//reflect 函数的入射方向是由光源指向交点，所以参数要取负</span></span><br><span class="line">        fixed3 reflectDir = normalize(reflect(-worldLightPos,normalDir));</span><br><span class="line">        <span class="comment">//计算视角方向</span></span><br><span class="line">        fixed3 viewDir = normalize(_WorldSpaceCameraPos.xyz - mul(unity_ObjectToWorld,v.vertex).xyz);</span><br><span class="line">        <span class="comment">//高光</span></span><br><span class="line">        fixed3 specularColor = (ambient *_Specular) * pow(saturate(dot(viewDir,reflectDir)),_Gloss);</span><br><span class="line"></span><br><span class="line">        o.color = specularColor + diffuseColor;</span><br><span class="line">        <span class="keyword">return</span> o;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function">fixed4 <span class="title">frag</span>(<span class="params">v2f i</span>) : SV_TARGET</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> fixed4(i.color,<span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      ENDCG</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  Fallback <span class="string">&quot;Diffuse&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="逐像素反射"><a href="#逐像素反射" class="headerlink" title="逐像素反射"></a>逐像素反射</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">Shader <span class="string">&quot;Custom/Learn02_SpecularPixel&quot;</span></span><br><span class="line">&#123;</span><br><span class="line">  properties&#123;</span><br><span class="line">    _DiffuseColor(<span class="string">&quot;DiffuseColor&quot;</span>,Color) = (<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">    _Specular(<span class="string">&quot;Specular&quot;</span>,Color) = (<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">    _Gloss(<span class="string">&quot;Gloss&quot;</span>,Range(<span class="number">8</span>,<span class="number">256</span>)) = <span class="number">50</span></span><br><span class="line">  &#125;</span><br><span class="line">  SubShader&#123;</span><br><span class="line">    Pass&#123;</span><br><span class="line">      Tags&#123;<span class="string">&quot;LightMode&quot;</span> = <span class="string">&quot;ForwardBase&quot;</span>&#125;</span><br><span class="line">      CGPROGRAM</span><br><span class="line">      <span class="meta">#<span class="meta-keyword">pragma</span> vertex vert</span></span><br><span class="line">      <span class="meta">#<span class="meta-keyword">pragma</span> fragment frag</span></span><br><span class="line">      <span class="meta">#include &quot;Lighting.cginc&quot;</span></span><br><span class="line"></span><br><span class="line">      fixed3 _DiffuseColor;</span><br><span class="line">      fixed3 _Specular;</span><br><span class="line">      <span class="built_in">float</span> _Gloss;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">struct</span> a2v&#123;</span><br><span class="line">        float4 vertex : POSITION;</span><br><span class="line">        fixed3 normal : NORMAL;</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">struct</span> v2f&#123;</span><br><span class="line">        float4 pos : SV_POSITION;</span><br><span class="line">        fixed3 worldNormal : COLOR0;</span><br><span class="line">        fixed3 worldPos : COLOR1;</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="function">v2f <span class="title">vert</span>(<span class="params">a2v v</span>)</span>&#123;</span><br><span class="line">        v2f o;</span><br><span class="line">        o.pos = UnityObjectToClipPos(v.vertex);</span><br><span class="line">        o.worldNormal = normalize(mul((float3x3)unity_ObjectToWorld,v.normal));</span><br><span class="line">        o.worldPos = mul(unity_ObjectToWorld,v.vertex).xyz;</span><br><span class="line">        <span class="keyword">return</span> o;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function">fixed4 <span class="title">frag</span>(<span class="params">v2f i</span>) : SV_TARGET</span>&#123;</span><br><span class="line">        fixed3 ambient = _LightColor0.rgb;</span><br><span class="line">        fixed3 worldLightPos = normalize(_WorldSpaceLightPos0.xyz);</span><br><span class="line"></span><br><span class="line">        fixed3 diffuseColor = (ambient * _DiffuseColor) * (<span class="number">0.5</span> + <span class="number">0.5</span> * dot(worldLightPos,i.worldNormal));</span><br><span class="line">        </span><br><span class="line">        fixed3 viewDir = normalize(_WorldSpaceCameraPos.xyz - i.worldNormal.xyz);</span><br><span class="line">        fixed3 reflectDir = normalize(reflect(-worldLightPos,i.worldNormal));</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        fixed3 specularColor = (ambient * _Specular) * pow(saturate(dot(viewDir,reflectDir)),_Gloss);</span><br><span class="line"></span><br><span class="line">        fixed3 color = diffuseColor + specularColor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> fixed4(color,<span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      ENDCG</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Blinn-Phong"><a href="#Blinn-Phong" class="headerlink" title="Blinn-Phong"></a>Blinn-Phong</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">Shader <span class="string">&quot;Custom/Learn02_SpecularBlinn&quot;</span></span><br><span class="line">&#123;</span><br><span class="line">  Properties&#123;</span><br><span class="line">    _DiffuseColor(<span class="string">&quot;DiffuseColor&quot;</span>,Color) = (<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">    _Specular(<span class="string">&quot;Speculaar&quot;</span>,Color) = (<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">    _Gloss(<span class="string">&quot;Gloss&quot;</span>,Range(<span class="number">8</span>,<span class="number">256</span>)) = <span class="number">8</span></span><br><span class="line">  &#125;</span><br><span class="line">  SubShader&#123;</span><br><span class="line">    Pass&#123;</span><br><span class="line">      Tags&#123;<span class="string">&quot;LightMode&quot;</span> = <span class="string">&quot;ForwardBase&quot;</span>&#125;</span><br><span class="line">      CGPROGRAM</span><br><span class="line">      <span class="meta">#<span class="meta-keyword">pragma</span> vertex vert</span></span><br><span class="line">      <span class="meta">#<span class="meta-keyword">pragma</span> fragment frag</span></span><br><span class="line">      <span class="meta">#include &quot;Lighting.cginc&quot;</span></span><br><span class="line"></span><br><span class="line">      fixed3 _DiffuseColor;</span><br><span class="line">      fixed3 _Specular;</span><br><span class="line">      <span class="built_in">float</span> _Gloss;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">struct</span> a2v&#123;</span><br><span class="line">        float4 vertex : POSITION;</span><br><span class="line">        fixed3 normal : NORMAL;</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">struct</span> v2f&#123;</span><br><span class="line">        float4 pos : SV_POSITION;</span><br><span class="line">        fixed3 worldNormal : COLOR0;</span><br><span class="line">        fixed3 worldVertex : COLOR1;</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="function">v2f <span class="title">vert</span>(<span class="params">a2v v</span>)</span>&#123;</span><br><span class="line">        v2f o;</span><br><span class="line">        o.pos = UnityObjectToClipPos(v.vertex);</span><br><span class="line">        o.worldNormal = mul((float3x3)unity_ObjectToWorld,v.normal);</span><br><span class="line">        o.worldVertex = mul(unity_ObjectToWorld,v.vertex);</span><br><span class="line">        <span class="keyword">return</span> o;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function">fixed4 <span class="title">frag</span>(<span class="params">v2f i</span>) : SV_TARGET</span>&#123;</span><br><span class="line">        fixed3 ambient = _LightColor0.rgb;</span><br><span class="line">        fixed3 normalDir = normalize(i.worldNormal);</span><br><span class="line">        fixed3 lightDir = normalize(_WorldSpaceLightPos0.xyz);</span><br><span class="line">        fixed3 diffuseColor = (ambient * _DiffuseColor) * (<span class="number">0.5</span> + <span class="number">0.5</span> * dot(normalDir,lightDir));</span><br><span class="line"></span><br><span class="line">        fixed3 viewDir = normalize(_WorldSpaceCameraPos.xyz - i.worldVertex.xyz);</span><br><span class="line">        fixed3 halfDir = normalize(viewDir + lightDir);</span><br><span class="line">        fixed3 specularColor = (ambient * _Specular) * pow(max(<span class="number">0</span>,dot(normalDir,halfDir)),_Gloss);</span><br><span class="line">        fixed3 color = specularColor;</span><br><span class="line">        <span class="keyword">return</span> fixed4(color,<span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      ENDCG</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div><div class="article-tags is-size-7 mb-4"><span class="mr-2"></span><a class="link-muted mr-2" rel="tag" href="/tags/Shader/">Shader</a><a class="link-muted mr-2" rel="tag" href="/tags/TA/">TA</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2021/10/02/TA%E5%85%A5%E9%97%A8-2021-10-02-UnityShader%E5%85%A5%E9%97%A8%E7%B2%BE%E8%A6%81%E3%80%90%E5%9F%BA%E7%A1%80%E7%AF%87%E3%80%91/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">UnityShader入门精要【基础篇】</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2021/09/16/TA%E5%85%A5%E9%97%A8-2021-09-16-TA%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83%EF%BC%88%E4%B8%80%EF%BC%89/"><span class="level-item">【TA从入门到放弃】【一】</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><ul class="menu-list"><ul class="menu-list"><li><a class="level is-mobile" href="#一个带可控属性的简单着色器"><span class="level-left"><span class="level-item">一个带可控属性的简单着色器</span></span></a></li></ul></ul><li><a class="level is-mobile" href="#漫反射（diffuse"><span class="level-left"><span class="level-item">漫反射（diffuse)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#逐顶点漫反射光照"><span class="level-left"><span class="level-item">逐顶点漫反射光照</span></span></a></li><li><a class="level is-mobile" href="#逐像素漫反射光照"><span class="level-left"><span class="level-item">逐像素漫反射光照</span></span></a></li><li><a class="level is-mobile" href="#兰伯特模型（Half-Lambert）"><span class="level-left"><span class="level-item">兰伯特模型（Half Lambert）</span></span></a></li></ul></li><li><a class="level is-mobile" href="#高光反射（Specular）"><span class="level-left"><span class="level-item">高光反射（Specular）</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#逐顶点反射"><span class="level-left"><span class="level-item">逐顶点反射</span></span></a></li><li><a class="level is-mobile" href="#逐像素反射"><span class="level-left"><span class="level-item">逐像素反射</span></span></a></li><li><a class="level is-mobile" href="#Blinn-Phong"><span class="level-left"><span class="level-item">Blinn-Phong</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/avatar2.png" alt="又在熬夜的切糕"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">又在熬夜的切糕</p><p class="is-size-6 is-block">Seto</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">8</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">10</p></a></div></div></nav><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Seto098"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Bilibilia" href="https://space.bilibili.com/35806582"><i class="fab fa-youtube"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Gitee" href="https://gitee.com/Seto098"><i></i></a></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Hexo/"><span class="level-start"><span class="level-item">Hexo</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/PHP/"><span class="level-start"><span class="level-item">PHP</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/TA/"><span class="level-start"><span class="level-item">TA</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Unity/"><span class="level-start"><span class="level-item">Unity</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/markDown/"><span class="level-start"><span class="level-item">markDown</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%8D%9A%E5%AE%A2/"><span class="level-start"><span class="level-item">博客</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%BB%BA%E6%A8%A1/"><span class="level-start"><span class="level-item">建模</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2021/10/"><span class="level-start"><span class="level-item">十月 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/09/"><span class="level-start"><span class="level-item">九月 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/06/"><span class="level-start"><span class="level-item">六月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/01/"><span class="level-start"><span class="level-item">一月 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Hexo/"><span class="tag">Hexo</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Shader/"><span class="tag">Shader</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TA/"><span class="tag">TA</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/markDown/"><span class="tag">markDown</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8D%A1%E9%80%9A/"><span class="tag">卡通</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%9F%BA%E7%A1%80/"><span class="tag">基础</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%BB%BA%E6%A8%A1%E6%B5%81%E7%A8%8B/"><span class="tag">建模流程</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%9C%9F%E6%9C%AB%E4%BD%9C%E4%B8%9A/"><span class="tag">期末作业</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%AE%80%E5%8D%95/"><span class="tag">简单</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%A7%92%E8%89%B2%E5%BB%BA%E6%A8%A1/"><span class="tag">角色建模</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li><li><a class="level is-mobile" href="https://bilibili.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bilibili</span></span><span class="level-right"><span class="level-item tag">bilibili.com</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo2.svg" alt="放一些摸鱼记录" height="28"></a><p class="is-size-7"><span>&copy; 快乐 2021 | Seto</span>     (.・ω・.)23333好耶</p></div><div class="level-end"></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "让我摸摸你的Cookie。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><script src="https://unpkg.com/mermaid@8.8.4/dist/mermaid.min.js"></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="要找点什么东西吗"></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"要找点什么东西吗","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>