{"pages":[{"title":"分类","text":"","link":"/categories/index.html"},{"title":"标签","text":"","link":"/tags/index.html"}],"posts":[{"title":"PHP期末作业","text":"登陆注册 学生教师端 增删查改 引入header和Footer12include('Menu/header.php');include('Menu/footer.php'); 注册登录系统数据库创建注册表1234567CREATE TABLE `register` ( `userId` int(20) NOT NULL AUTO_INCREMENT COMMENT '用户id', `userName` varchar(60) NOT NULL COMMENT '用户名', `passWord` varchar(60) NOT NULL COMMENT '用户密码', `passWordConfirm` varchar(60) NOT NULL COMMENT '确认密码', PRIMARY KEY (`userId`)) ENGINE=MyISAM AUTO_INCREMENT=5 DEFAULT CHARSET=utf8 数据库连接连接库1$con=new mysqli(&quot;localhost&quot;,&quot;root&quot;,&quot;&quot;,&quot;user&quot;,&quot;3306&quot;); 测试连接123if($getCon-&gt;connect_error) { die(&quot;连接失败:&quot;.$getCon-&gt;connect_error);} 解决乱码1mysqli_query($getCon,&quot;set names utf8&quot;); 登录获取表单数据12$userName=$_POST['userName'];$passWord=$_POST['passWord']; 从数据库获取数据数据查询语句12$selData=&quot;select userName from $tableNam where userName='$userName' and passWord='$passWord';&quot;; 判断账号密码12345678910111213$que=mysqli_query($getCon,$selData);$res=mysqli_fetch_row($que);if($res){ echo &quot;&lt;script&gt; alert('$userName 登入成功'); self.location='../index.php'; &lt;/script&gt;&quot;;}else{ echo &quot;&lt;script&gt; alert('账号或密码错误,重新输入'); &lt;/script&gt;&quot;; } 注册获取表单数据123$userName=$_POST['userName'];$passWord=$_POST['passWord'];$passWordConfirm=$_POST['passWordConfirm']; 上传数据到数据库数据添加语句12$insertData=&quot;insert into register(userName,passWord,passWordConfirm) value('$userName','$passWord','$passWordConfirm');&quot;; 判断用户名占用12345678$sel=&quot;select userName from $tableNam where userName = '$userName';&quot;;$que=mysqli_query($getCon,$sel);$pal=mysqli_fetch_row($que);if($pal){ echo &quot;&lt;script&gt; alert('注册失败,用户$userName 已被占用'); &lt;/script&gt;&quot;;} 执行上传数据库123456789if($getCon-&gt;query($insertData)){ echo &quot;&lt;script&gt; alert('注册成功'); self.location='./login.php'; &lt;/script&gt;&quot;;}else{ echo &quot;&lt;script&gt;alert('注册失败')&lt;/script&gt;&quot;;} 选课系统数据库导入数据库1source S:\\Wamp\\www\\xk.sql 连接数据库1$con=new mysqli(&quot;localhost&quot;,&quot;root&quot;,&quot;&quot;,&quot;management&quot;,&quot;3306&quot;); 测试连接123if($getCon-&gt;connect_error) { die(&quot;连接失败:&quot;.$getCon-&gt;connect_error);} 解决乱码1mysqli_query($getCon,&quot;set names utf8&quot;); 学生端课程预览学生信息学生选课所有课程输出123$selAllCou=&quot;SELECT CouName,Kind,Teacher,SchoolTime,CouNo FROM course; &quot;; 查看已选课程12345$selCoued=&quot;SELECT c.CouName,c.Kind,c.Teacher,c.SchoolTime,c.CouNo FROM student s,course c,stucou sc WHERE s.StuNo=sc.StuNo AND c.CouNo=sc.CouNo AND s.StuNo='$StuNo' GROUP BY c.CouName; &quot;; 查看未选课程12345$selCouNo=&quot;SELECT c.CouName,c.Kind,c.Teacher,c.SchoolTime,c.CouNo FROM student s,course c,stucou sc WHERE s.StuNo=sc.StuNo AND c.CouNo!=sc.CouNo AND s.StuNo='$StuNo' GROUP BY c.CouName; &quot;; 执行12$resSelEd=mysqli_query($getCon,$selCoued);$resSelNo=mysqli_query($getCon,$selCouNo); 循环执行输出已选部分1234567891011while($row=mysqli_fetch_array($resSelEd)){ echo&quot; &lt;tr class=\\&quot;showCouCen\\&quot;&gt; &lt;td&gt;{$row['CouName']}&lt;/td&gt; &lt;td&gt;{$row['Kind']}&lt;/td&gt; &lt;td&gt;{$row['Teacher']}&lt;/td&gt; &lt;td&gt;{$row['SchoolTime']}&lt;/td&gt; &lt;td&gt;&lt;input type='checkbox' value='{$row['CouNo']}' name='chebox[]' checked='checked' onclick='che(this)'&gt;&lt;/td&gt; &lt;/tr&gt; &quot;;} 输出未选部分1234567891011while($row=mysqli_fetch_array($resSelNo)){ echo&quot; &lt;tr class=\\&quot;showCouCen\\&quot;&gt; &lt;td&gt;{$row['CouName']}&lt;/td&gt; &lt;td&gt;{$row['Kind']}&lt;/td&gt; &lt;td&gt;{$row['Teacher']}&lt;/td&gt; &lt;td&gt;{$row['SchoolTime']}&lt;/td&gt; &lt;td&gt;&lt;input type='checkbox' value='{$row['CouNo']}' name='chebox[]' onclick='che(this)'&gt;&lt;/td&gt; &lt;/tr&gt; &quot;;} 选课条件1234567891011echo &quot;&lt;script&gt; var st=0,max=5 - $StuSum; function che(obj){ obj.checked?st++:st--; if(st&gt;max){ obj.checked=false; alert('只能选五门'); st--; } }&lt;/script&gt;&quot;; 修改选课删除学生选课删除选课123$delCou=&quot;DELETE FROM stucou WHERE StuNo='$StuNo'; &quot;; 执行1mysqli_query($getCon,$delCou); 更新选课获取已选课数1$sum=count($chebox); 更新数据库123456for($i=0;$i&lt;$sum;$i+=1){ $ChoCou=&quot;INSERT INTO stucou(StuNo,CouNo,WillOrder,state) VALUE('$StuNo','$chebox[$i]',$i,'报名'); &quot;; mysqli_query($getCon,$ChoCou);} 教师端浏览课程查询语句1$selCourse=&quot;select*from course&quot;; 执行语句1$resSel=mysqli_query($getCon,$selCourse); 循环执行12345678910111213141516while($row=mysqli_fetch_array($resSel)){ echo&quot; &lt;tr class=\\&quot;showCouCen\\&quot;&gt; &lt;td&gt;{$row['CouNo']}&lt;/td&gt; &lt;td&gt;{$row['CouName']}&lt;/td&gt; &lt;td&gt;{$row['Kind']}&lt;/td&gt; &lt;td&gt;{$row['Credit']}&lt;/td&gt; &lt;td&gt;{$row['Teacher']}&lt;/td&gt; &lt;td&gt;{$row['DepartNo']}&lt;/td&gt; &lt;td&gt;{$row['SchoolTime']}&lt;/td&gt; &lt;td&gt;{$row['LimitNum']}&lt;/td&gt; &lt;td&gt;{$row['WillNum']}&lt;/td&gt; &lt;td&gt;{$row['ChooseNum']}&lt;/td&gt; &lt;/tr&gt; &quot;; } 增加课程获取插入数据12345678910$CouNo=$_POST['CouNo'];$CouName==$_POST['CouName'];$Kind=$_POST['Kind'];$Credit=$_POST['Credit'];$Teacher=$_POST['Teacher'];$DepartNo=$_POST['DepartNo'];$SchoolTime=$_POST['SchoolTime'];$LimitNum=$_POST['LimitNum'];$WillNum=$_POST['WillNum'];$ChooseNum=$_POST['ChooseNum']; 插入语句12345$insCourse=&quot;insert into course(CouNo,CouName,Kind,Credit,Teacher,DepartNo,SchoolTime,LimitNum,WillNum,ChooseNum)value($CouNo,'$CouName','$Kind',$Credit,'$Teacher',$DepartNo,'$SchoolTime',$LimitNum,$WillNum,$ChooseNum)&quot;; 执行语句12345678910111213141516if($getCon-&gt;query($insCourse)){ echo &quot; &lt;script&gt; alert('插入成功'); self.location='../../teaCon/courseShow.php'; &lt;/script&gt; &quot;;}else{ echo &quot; &lt;script&gt; alert('插入失败'); window.history.go(-1);//返回上一级 &lt;/script&gt; &quot;;} 修改课程条件查询1$selCourseWhe=&quot;select * from course where CouNo = $CouNo&quot;; 获取数据12345678910$CouNo=$_POST['CouNo'];$CouName=$_POST['CouName'];$Kind=$_POST['Kind'];$Credit=$_POST['Credit'];$Teacher=$_POST['Teacher'];$DepartNo=$_POST['DepartNo'];$SchoolTime=$_POST['SchoolTime'];$LimitNum=$_POST['LimitNum'];$WillNum=$_POST['WillNum'];$ChooseNum=$_POST['ChooseNum']; 更新语句123456789101112$updCourse=&quot;UPDATE course SET CouNo=$CouNo, CouName='$CouName', Kind='$Kind', Credit=$Credit, Teacher='$Teacher', DepartNo=$DepartNo, SchoolTime='$SchoolTime', LimitNum=$LimitNum, WillNum=$WillNum, ChooseNum=$ChooseNumWHERE CouNo=$CouNo;&quot;; 执行语句123456789101112if($getCon-&gt;query($updCourse)){ echo &quot;&lt;script&gt; alert('修改成功'); self.location='../../teaCon/courseUpdata.php'; &lt;/script&gt;&quot;;}else{ echo &quot;&lt;script&gt; alert('修改失败'); window.history.go(-1); &lt;/script&gt;&quot;; } 删除课程删除语句1$delCourse=&quot;DELETE FROM course WHERE CouNo=$CouNo;&quot;; 执行语句1234567891011if($getCon-&gt;query($delCourse)){ echo &quot;&lt;script&gt; alert('删除成功'); self.location='../../teaCon/courseUpdata.php'; &lt;/script&gt;&quot;; } else{ echo &quot;&lt;script&gt; alert('删除失败'); &lt;/script&gt;&quot;; } 搜索课程获取条件12$Condition=$_POST['Condition'];$Search=$_POST['Search']; 模糊搜索1$selCourse=&quot;select*from course where $Condition like '%$Search%'&quot;; 执行语句1$resSel=mysqli_query($getCon,$selCourse); 遍历输出12345678910111213141516while($row=mysqli_fetch_array($resSel)){ echo&quot; &lt;tr class=\\&quot;showCouCen\\&quot;&gt; &lt;td&gt;{$row['CouNo']}&lt;/td&gt; &lt;td&gt;{$row['CouName']}&lt;/td&gt; &lt;td&gt;{$row['Kind']}&lt;/td&gt; &lt;td&gt;{$row['Credit']}&lt;/td&gt; &lt;td&gt;{$row['Teacher']}&lt;/td&gt; &lt;td&gt;{$row['DepartNo']}&lt;/td&gt; &lt;td&gt;{$row['SchoolTime']}&lt;/td&gt; &lt;td&gt;{$row['LimitNum']}&lt;/td&gt; &lt;td&gt;{$row['WillNum']}&lt;/td&gt; &lt;td&gt;{$row['ChooseNum']}&lt;/td&gt; &lt;/tr&gt; &quot;; }","link":"/2021/06/23/PHP%E6%9C%9F%E6%9C%AB%E4%BD%9C%E4%B8%9A/"},{"title":"卡通角色建模","text":"这是一条测试o((&gt;ω&lt; ))o","link":"/2021/09/10/%E5%8D%A1%E9%80%9A%E8%A7%92%E8%89%B2%E5%BB%BA%E6%A8%A1/"}],"tags":[{"name":"PHP","slug":"PHP","link":"/tags/PHP/"},{"name":"学习","slug":"学习","link":"/tags/%E5%AD%A6%E4%B9%A0/"},{"name":"角色建模","slug":"角色建模","link":"/tags/%E8%A7%92%E8%89%B2%E5%BB%BA%E6%A8%A1/"},{"name":"过程总结","slug":"过程总结","link":"/tags/%E8%BF%87%E7%A8%8B%E6%80%BB%E7%BB%93/"},{"name":"卡通","slug":"卡通","link":"/tags/%E5%8D%A1%E9%80%9A/"}],"categories":[{"name":"PHP","slug":"PHP","link":"/categories/PHP/"},{"name":"建模","slug":"建模","link":"/categories/%E5%BB%BA%E6%A8%A1/"},{"name":"期末作业","slug":"PHP/期末作业","link":"/categories/PHP/%E6%9C%9F%E6%9C%AB%E4%BD%9C%E4%B8%9A/"}]}